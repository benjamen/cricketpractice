<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Cricket Reaction Grid Pro</title>
<style>
body{
    font-family:Arial,Helvetica,sans-serif;
    text-align:center;
    background:#0f172a;
    color:#fff;
    margin:0;
    padding:20px;
}
h1{margin-bottom:10px}
#controls{margin-bottom:10px}
#grid{
    display:grid;
    grid-template-columns:repeat(3,1fr);
    grid-template-rows:repeat(3,1fr);
    gap:8px;
    justify-content:center;
    margin:20px auto;
    max-width:500px;
}
.cell{
    display:flex;
    flex-direction:column;
    align-items:center;
    justify-content:center;
    border:2px solid #334155;
    border-radius:8px;
    font-size:14px;
    background:#1e293b;
    transition:.2s;
    font-weight:bold;
    aspect-ratio:1/1;
    overflow:hidden;
    min-width:0;
    min-height:0;
}
.cell .cell-id{font-size:clamp(10px,2.5vw,16px);opacity:.7;line-height:1.2;}
.cell .cell-arrow{font-size:clamp(20px,6vw,48px);line-height:1;margin:2px 0;}
.cell .cell-label{font-size:clamp(8px,1.8vw,13px);letter-spacing:.05em;line-height:1.2;}
.cell .cell-foot{font-size:clamp(7px,1.4vw,11px);margin-top:2px;padding:1px 5px;border-radius:3px;background:rgba(0,0,0,.25);letter-spacing:.03em;line-height:1.3;}
.player{background:#3b82f6;}
.low{background:#facc15;color:#000;box-shadow:0 0 20px #facc15;}
.medium{background:#fb923c;color:#000;box-shadow:0 0 20px #fb923c;}
.high{background:#ef4444;color:#fff;box-shadow:0 0 20px #ef4444;}
select,button,input{
    padding:8px 12px;
    margin:5px;
    border-radius:6px;
    border:none;
    font-size:14px;
}
button{background:#f97316;color:#fff;cursor:pointer;}
#counter{margin-top:10px;font-size:18px;font-weight:bold;}
@media(max-width:500px){
    #grid{max-width:90vw}
}
</style>
</head>
<body>
<h1>Cricket Practice Reaction Grid</h1>
<div id='controls'>
Speed:
<select id='speed'>
<option value='10000'>Slow</option>
<option value='6000'>Medium</option>
<option value='3000'>Fast</option>
<option value='1500'>Super Fast</option>
<option value='random'>Random</option>
</select>
Balls:
<input type='number' id='ballCount' value='50' min='1' style='width:70px'>
<button onclick='startSession()'>Start Session</button>
<button onclick='stopSession()'>Stop Session</button>
</div>
<div id='counter'></div>
<div id='grid'></div>

<script>
const cols=['A','B','C'];
const rows=['1','2','3'];
const grid=document.getElementById('grid');
let cells={};

// Create grid cells
rows.forEach(r=>{
    cols.forEach(c=>{
        let id=c+r;
        let div=document.createElement('div');
        div.className='cell';
        div.id=id;
        let idSpan=document.createElement('span');
        idSpan.className='cell-id';
        idSpan.textContent=id;
        div.appendChild(idSpan);
        if(id==='B1') div.classList.add('player');
        grid.appendChild(div);
        cells[id]=div;
    });
});

let interval=null;

function getSpeed(){
    let s=document.getElementById('speed').value;
    if(s==='random'){
        let speeds=[1500,3000,6000,10000];
        return speeds[Math.floor(Math.random()*speeds.length)];
    }
    return parseInt(s);
}

function startSession(){
    clearInterval(interval);
    let total=parseInt(document.getElementById('ballCount').value);
    let delivered=0;
    let speed=getSpeed();
    document.getElementById('counter').innerText='Balls Remaining: '+total;
    interval=setInterval(()=>{
        if(delivered>=total){
            clearInterval(interval);
            clearGrid();
            document.getElementById('counter').innerText='Session Complete';
            return;
        }
        deliverBall(speed);
        delivered++;
        document.getElementById('counter').innerText='Balls Remaining: '+(total-delivered);
    }, speed);
}

function stopSession(){
    clearInterval(interval);
    clearGrid();
    document.getElementById('counter').innerText='Session Stopped';
}

const heightConfig={
    low:{arrow:'↓',label:'LOW'},
    medium:{arrow:'→',label:'MED'},
    high:{arrow:'↑',label:'HIGH'}
};

function makeCellId(text){
    let s=document.createElement('span');
    s.className='cell-id';
    s.textContent=text;
    return s;
}

const DEFAULT_SPEED_MS=10000;
function getFootwork(row, height, speedMs){
    if(row==='3') return 'FRONT FOOT';
    if(row==='1') return 'BACK FOOT';
    // good length (row 2): high → back foot; low → front foot; medium depends on speed
    if(height==='high') return 'BACK FOOT';
    if(height==='low') return 'FRONT FOOT';
    return speedMs<=3000 ? 'BACK FOOT' : 'FRONT FOOT';
}

function deliverBall(speedMs){
    clearGrid();
    let options=Object.keys(cells).filter(c=>c!=='B1');
    let randomCell=options[Math.floor(Math.random()*options.length)];
    let heights=['low','medium','high'];
    let h=heights[Math.floor(Math.random()*heights.length)];
    let cfg=heightConfig[h];
    let row=randomCell.slice(1);
    let foot=getFootwork(row,h,speedMs||DEFAULT_SPEED_MS);
    let arrow=document.createElement('span');
    arrow.className='cell-arrow';
    arrow.textContent=cfg.arrow;
    let label=document.createElement('span');
    label.className='cell-label';
    label.textContent=cfg.label;
    let footSpan=document.createElement('span');
    footSpan.className='cell-foot';
    footSpan.textContent=foot;
    let cell=cells[randomCell];
    cell.classList.add(h);
    cell.innerHTML='';
    cell.appendChild(makeCellId(randomCell));
    cell.appendChild(arrow);
    cell.appendChild(label);
    cell.appendChild(footSpan);
}

function clearGrid(){
    Object.values(cells).forEach(c=>{
        c.className='cell';
        c.innerHTML='';
        c.appendChild(makeCellId(c.id));
        if(c.id==='B1') c.classList.add('player');
    });
}
</script>
</body>
</html>
